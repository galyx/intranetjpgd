$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".real").maskMoney({precision:2,decimal:",",thousands:""}),$('[name="postal_code"]').mask("00000-000"),$('[name="cpf"]').mask("000.000.000-00"),$('[name="cnpj"]').mask("00.000.000/0000-00"),$('[name="document_number"]').mask("000.000.000-00"),$(document).on("change",'[name="type_document"]',(function(){"cpf"==$(this).val()?$('[name="document_number"]').mask("000.000.000-00"):$('[name="document_number"]').mask("00.000.000/0000-00")}));var behavior=function(val){return 11===val.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},options_fone={onKeyPress:function(val,e,field,options_fone){field.mask(behavior.apply({},arguments),options_fone)}};$(".phone").mask(behavior,options_fone),$(document).on("keyup",'[name="postal_code"]',(function(){$(this).val().length>8&&$.ajax({url:"/cep-busca",type:"POST",data:{cep:$(this).val()},success:data=>{$('[name="address2"]').val(data.bairro),$('[name="state"]').val(data.uf),$('[name="city"]').val(data.localidade),$('[name="address"]').val(data.logradouro),$('[name="home_number"]').focus()}})})),$(document).on("blur",'[name="document_number"], .documento',(function(){var thiss=$(this),document_number=$(this).val();document_number&&(valida_cpf_cnpj(document_number)||Swal.fire({icon:"error",text:($('[name="type_document"]').length>0?$('[name="type_document"]').val().toUpperCase():"Documento")+" informado invalido!"}).then(result=>{}))})),$(document).on("click",".btn-add-itens",(function(){$("#itens").append('\n            <div class="row item">\n                <div class="form-group col-6">\n                    <input type="text" class="form-control form-control-sm" name="itens[]">\n                </div>\n                <div class="form-group col-4">\n                    <input type="text" class="form-control form-control-sm real valor-item" name="itens[]">\n                </div>\n                <div class="form-group col-2">\n                    <button type="button" class="btn btn-sm btn-block btn-danger btn-remove-itens"><i class="fa-solid fa-times"></i></button>\n                </div>\n            </div>\n        '),$(".real").maskMoney({precision:2,decimal:",",thousands:""});var total_height=0;$(this).closest(".modal-body").children("div").each((function(){total_height+=$(this).height()})),$(this).closest(".modal-body").scrollTop(total_height)})),$(document).on("click",".btn-remove-itens",(function(){$(this).closest(".item").remove();var valor_total=0;$(".valor-item").each((function(){valor_total+=parseFloat($(this).val().replace(",","."))||0})),$('[name="total_value"]').val(valor_total.toFixed(2)),$(".valor-total").html(`R$ ${valor_total.toFixed(2).toString().replace(".",",")}`)})),$(document).on("keyup",".valor-item",(function(){var valor_total=0;$(".valor-item").each((function(){valor_total+=parseFloat($(this).val().replace(",","."))||0})),$('[name="total_value"]').val(valor_total.toFixed(2)),$(".valor-total").html(`R$ ${valor_total.toFixed(2).toString().replace(".",",")}`)}))}));